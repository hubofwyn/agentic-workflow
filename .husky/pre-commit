#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Pre-commit hook for Agentic Workflow
echo "üîç Running pre-commit checks..."

# Run pre-commit hooks
if command -v pre-commit &> /dev/null; then
    pre-commit run --all-files
else
    # Fallback to npm scripts if pre-commit is not installed
    npm run lint || {
        echo "‚ùå Linting failed. Please fix errors and try again."
        exit 1
    }

    npm run format:check || {
        echo "‚ùå Code is not properly formatted. Run 'npm run format' to fix."
        exit 1
    }

    npm run type-check || {
        echo "‚ùå TypeScript type checking failed."
        exit 1
    }
fi

echo "‚úÖ Pre-commit checks passed!"